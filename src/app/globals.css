@import "tailwindcss";

:root {
	--bg: #ffffff;
	--text: #111111;
	--muted: #666666;
	--card: #f6f6f6;
	--border: #e6e6e6;
	--accent: #ff59ff;
}

@media (prefers-color-scheme: dark) {
	:root {
		--bg: #0b0b0b;
		--text: #eaeaea;
		--muted: #a3a3a3;
		--card: #141414;
		--border: #1f1f1f;
		--accent: #ff8aff;
	}
}

* { box-sizing: border-box; }
html, body { margin: 0; padding: 0; }
body {
	background: var(--bg);
	color: var(--text);
	font-family: var(--font-montserrat), ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, Helvetica, sans-serif;
	line-height: 1.6;
	font-size: 16px;
}

.container { max-width: 1280px; margin: 0 auto; padding: 0 12px; }
.layout { display: grid; grid-template-columns: 320px 1fr; gap: 0px; align-items: start; position: relative; min-height: calc(100vh - 56px); }
.layout::before { content: ""; position: absolute; top: 0; bottom: 0; left: calc(-50vw + 50%); width: calc(50vw - 50% + 320px + 16px); background: color-mix(in srgb, var(--bg) 94%, var(--card) 6%); border-right: 1px solid var(--border); pointer-events: none; }
.content { min-height: 60dvh; }
.layout > .content { padding: 24px 64px; }

.site-header { padding: 0; border-bottom: 1px solid var(--border); position: sticky; top: 0; backdrop-filter: blur(6px); background: color-mix(in srgb, var(--bg), transparent 10%); box-shadow: 0 1px 0 rgba(0,0,0,0.05); z-index: 100; }
.site-header .container { display: flex; align-items: center; justify-content: space-between; height: 56px; }
.brand { font-weight: 700; text-decoration: none; color: var(--text); letter-spacing: 0.5px; margin-left: 20px; }
.nav { display: flex; gap: 20px; align-items: center; }
.nav a { color: var(--text); text-decoration: none; padding: 8px 12px; border-radius: 10px; background: var(--card); transition: background .2s ease, transform .15s ease, box-shadow .2s ease, color .2s ease; }
.nav a:hover { background: color-mix(in srgb, var(--card), var(--text) 4%); box-shadow: 0 2px 8px rgba(0,0,0,0.06); transform: translateY(-1px); }
.nav a.icon-link { background: transparent; padding: 0; border-radius: 0; box-shadow: none; display: flex; align-items: center; justify-content: center; }
.nav a.icon-link:hover { background: transparent; box-shadow: none; transform: none; color: color-mix(in srgb, var(--text), var(--bg) 20%); }
.nav a.icon-link svg { width: 20px; height: 20px; display: block; }

/* Mobile menu button */
.menu-btn { display: none; align-items: center; justify-content: center; width: 38px; height: 38px; border-radius: 10px; background: transparent; color: var(--text); box-shadow: none; margin-left: -6px; padding: 8px; }
.menu-btn:hover { background: color-mix(in srgb, var(--card), var(--text) 6%); box-shadow: none; transform: none; }
.menu-btn svg { width: 48px; height: auto; }

/* Filled state when drawer is open */
.drawer-open .menu-btn { background: color-mix(in srgb, var(--card), var(--text) 10%); box-shadow: inset 0 0 0 1px var(--border); }

.post-list { list-style: none; padding: 0; margin: 0 0; display: flex; flex-direction: column; gap: 6px; }
.sidebar { position: sticky; top: 56px; }
.sidebar .post-list { padding: 24px 0; max-height: calc(100vh - 60px); overflow-y: auto; overscroll-behavior: contain; padding-right: 18px; }
.post-item { padding-right: 24px; padding-left: 20px; padding-top: 10px; padding-bottom: 10px; background: transparent; border-radius: 6px; display: flex; flex-direction: column; gap: 2px; transition: background .2s ease, transform .15s ease, box-shadow .2s ease; cursor: pointer; }
.post-item:hover { background: color-mix(in srgb, var(--card), var(--text) 4%); box-shadow: 0 4px 16px rgba(0,0,0,0.06); }
.post-item.is-active, .post-item.is-active:hover { background: color-mix(in srgb, var(--card), var(--text) 6%); box-shadow: 0 0 0 2px var(--border); transform: none; cursor: default; }
.post-item.is-static, .post-item.is-static:hover { background: transparent; box-shadow: none; cursor: default; }
.post-sep { height: 0; border-bottom: 1px solid color-mix(in srgb, var(--text) 18%, transparent); margin: 8px 24px 8px 20px; list-style: none; padding: 0; display: block; flex: 0 0 auto; }
.post-item a { color: var(--text); text-decoration: none; font-size: 14px; }
.post-item a:hover { text-decoration: none; }
.post-meta { color: var(--muted); font-size: 12px; display: inline-flex; align-items: center; }
.post-meta svg { width: 14px; height: 14px; vertical-align: middle; display: block; }
.post-meta .meta-icon-unlisted { width: 12px; height: 12px; transform: translateY(2px); }
.post-meta span { margin-right: 2px; }
.post-meta .meta { display: inline-flex; align-items: center; }
.post-meta .meta-label { font-size: 12px; line-height: 1; }

/* Sidebar skeleton loading */
.skeleton { position: relative; overflow: hidden; background: color-mix(in srgb, var(--text) 8%, transparent); border-radius: 8px; }
.skeleton::after { content: ""; position: absolute; inset: 0; background: linear-gradient(90deg, transparent, color-mix(in srgb, var(--bg), var(--text) 12%), transparent); transform: translateX(-100%); animation: shimmer 1.2s ease-in-out infinite; }
.skeleton-title { height: 14px; width: 70%; }
.skeleton-meta { height: 10px; width: 40%; margin-top: 8px; border-radius: 999px; }
@keyframes shimmer { 100% { transform: translateX(100%); } }

/* Staggered entrance for sidebar items */
.stagger-list .post-item { opacity: 0; animation: slideUp .28s ease both; }
.stagger-list .post-item:nth-child(1) { animation-delay: 0s; }
.stagger-list .post-item:nth-child(2) { animation-delay: .04s; }
.stagger-list .post-item:nth-child(3) { animation-delay: .08s; }
.stagger-list .post-item:nth-child(4) { animation-delay: .12s; }
.stagger-list .post-item:nth-child(5) { animation-delay: .16s; }
.stagger-list .post-item:nth-child(6) { animation-delay: .20s; }
.stagger-list .post-item:nth-child(7) { animation-delay: .24s; }
.stagger-list .post-item:nth-child(8) { animation-delay: .28s; }
.stagger-list .post-item:nth-child(9) { animation-delay: .32s; }
.stagger-list .post-item:nth-child(10) { animation-delay: .36s; }
@media (prefers-reduced-motion: reduce) {
	.stagger-list .post-item { animation: none; opacity: 1; }
}

.post { margin-top: 24px; max-width: 760px; margin-left: auto; margin-right: auto; }
.post-title { font-size: 32px; line-height: 1.2; margin: 0 0 6px 0; font-weight: 700; }
.title-edit-link { color: var(--muted); text-decoration: none; transition: color .2s ease; }
.title-edit-link:hover { color: var(--text); }
.title-edit-link svg { display: block; }
.title-icon-edit { width: 18px; height: 18px; }
.is-editor .post-title:empty::before { content: "Add a title..."; color: var(--muted); font-weight: 600; }
.is-editor .post-title[data-suppress-placeholder]:empty::before { content: none; }
.post-date { margin-bottom: 32px; }
.post-cover { width: 100%; height: auto; border-radius: 12px; margin-bottom: 16px; }
.post-content img { max-width: 100%; height: auto; border-radius: 8px; }
/* Placeholder for empty editor content */
.post-content:empty::before { content: attr(data-placeholder); color: var(--muted); }
.post-content[data-suppress-placeholder]:empty::before { content: none; }
.post-content pre { background: var(--card); color: var(--text); padding: 12px; border-radius: 8px; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word; }
.post-content code { background: var(--card); padding: 2px 6px; border-radius: 6px; }
.post-content pre code { background: transparent; padding: 0; }
.post-content h2, .post-content h3 { margin-top: 24px; }
/* Ensure headings render with size/weight despite preflight resets */
.post-content h2 { font-size: 24px; line-height: 1.35; font-weight: 700; }
.post-content h3 { font-size: 20px; line-height: 1.4; font-weight: 600; }
.post-content ul { list-style: disc; padding-left: 1.25rem; margin: 12px 0; }
.post-content ol { list-style: decimal; padding-left: 1.25rem; margin: 12px 0; }
.post-content li { margin: 6px 0; }
.post-content blockquote { margin: 16px 0; padding-left: 16px; border-left: 3px solid var(--border); color: var(--muted); }
.post-content a { color: var(--accent); text-decoration: underline; }

/* Empty / not-found state */
.empty-state { display: grid; place-items: center; text-align: center; gap: 6px; padding: 40px 0; color: var(--muted); }
.empty-state .empty-icon { color: color-mix(in srgb, var(--muted), transparent 0%); }
.empty-state .empty-icon svg { width: 56px; height: 56px; display: block; }
.empty-state .empty-title { margin: 18px 0 2px 0; font-size: 22px; line-height: 1.3; color: color-mix(in srgb, var(--text), transparent 35%); font-weight: 700; }
.empty-state .empty-desc { margin: 0; font-size: 14px; color: color-mix(in srgb, var(--muted), transparent 10%); }

/* Editor */
.floating-toolbar { position: sticky; top: 72px; z-index: 5; display: flex; justify-content: center; }
.floating-toolbar .toolbar { display: flex; align-items: center; gap: 8px; padding: 6px 10px; border-radius: 12px; background: color-mix(in srgb, var(--bg) 70%, var(--card) 30%); box-shadow: 0 8px 30px rgba(0,0,0,0.10), inset 0 0 0 1px var(--border); backdrop-filter: blur(6px); width: 100%; max-width: 760px; }
.floating-toolbar .toolbar button { display: inline-flex; align-items: center; justify-content: center; min-height: 28px; flex: 1 1 0; }
.floating-toolbar .toolbar .ti { width: 18px; height: 18px; display: inline-flex; align-items: center; justify-content: center; color: var(--text); line-height: 1; }
.floating-toolbar .toolbar button[data-size="sm"] .ti { width: 14px; height: 14px; }
.floating-toolbar .toolbar button[data-kind="paragraph"] .ti { transform: translateY(1px); }
.floating-toolbar .toolbar button.is-active { color: var(--accent); }
.floating-toolbar .toolbar .toolbar-sep { flex: 0 0 auto; width: 1px; align-self: stretch; background: var(--border); margin: 0 6px; }
.floating-toolbar .toolbar .ti { width: 18px; height: 18px; display: block; color: var(--text); }
.floating-toolbar .toolbar button { color: var(--text); }
.floating-toolbar .toolbar button.is-active { color: var(--accent); }
.floating-toolbar .toolbar button { padding: 6px 10px; border-radius: 8px; background: transparent; box-shadow: none; }
.floating-toolbar .toolbar button:hover { background: color-mix(in srgb, var(--card), var(--text) 6%); box-shadow: none; transform: translateY(0); }
.floating-toolbar .toolbar button.is-active { background: color-mix(in srgb, var(--card), var(--text) 10%); box-shadow: inset 0 0 0 1px var(--border); }
.floating-toolbar .toolbar .toolbar-sep { width: 1px; height: 20px; background: var(--border); display: inline-block; margin: 0 2px; }
.editor-toolbar { display: flex; gap: 10px; align-items: center; background: transparent; border-radius: 12px; padding: 10px 0; position: sticky; top: 64px; z-index: 1; box-shadow: none; }
.editor-toolbar .title-input { flex: 1; padding: 10px 12px; background: var(--bg); color: var(--text); border-radius: 10px; font-size: 16px; border: none; transition: box-shadow .2s ease, background .2s ease; }
.editor-toolbar .spacer { flex: 0 0 12px; }
.wysiwyg { min-height: 50dvh; border-radius: 0; padding: 0; background: transparent; box-shadow: none; transition: none; }
.wysiwyg:empty:before { content: attr(data-placeholder); color: var(--muted); }
.slug-input, .cover-input { margin-top: 10px; width: 100%; padding: 10px 12px; border-radius: 10px; background: var(--bg); color: var(--text); border: none; box-shadow: inset 0 0 0 1px var(--border); transition: box-shadow .2s ease, background .2s ease; }
.cover-preview img { width: 100%; height: auto; border-radius: 12px; }

/* Privacy icon markers */
.badge { font-size: 12px; padding: 2px 6px; border-radius: 999px; background: var(--card); color: var(--muted); box-shadow: inset 0 0 0 1px var(--border); }

.card { padding: 20px; background: var(--card); border-radius: 12px; margin-top: 28px; box-shadow: 0 2px 12px rgba(0,0,0,0.06); }
label { display: grid; gap: 8px; margin: 12px 0; font-weight: 600; }
.editor-actions { display: flex; gap: 12px; }

.error { color: #e11d48; }

input, textarea { width: 100%; padding: 10px 12px; border-radius: 10px; background: var(--bg); color: var(--text); font: inherit; border: none; box-shadow: inset 0 0 0 1px var(--border); transition: box-shadow .2s ease, background .2s ease; }
button { padding: 10px 14px; border-radius: 10px; background: var(--bg); color: var(--text); cursor: pointer; border: none; box-shadow: inset 0 0 0 1px var(--border); transition: background .2s ease, transform .15s ease, box-shadow .2s ease, color .2s ease; }
button:hover { background: color-mix(in srgb, var(--bg), var(--text) 4%); box-shadow: 0 4px 16px rgba(0,0,0,0.06); }
input:focus, textarea:focus, .editor-toolbar .title-input:focus, .slug-input:focus, .cover-input:focus { outline: none; box-shadow: inset 0 0 0 2px var(--accent); background: var(--bg); }
/* Remove focus ring/box highlight for contentEditable areas to match post styling */
[contenteditable="true"]:focus { outline: none; box-shadow: none; background: transparent; }
.editor-actions { display: flex; gap: 12px; }

@media (prefers-color-scheme: dark) {
	body { background: var(--bg); color: var(--text); }
}

/* Slim, modern scrollbar */
.post-list::-webkit-scrollbar, .sidebar::-webkit-scrollbar {
	width: 8px;
}
.post-list::-webkit-scrollbar-track, .sidebar::-webkit-scrollbar-track {
	background: transparent;
}
.post-list::-webkit-scrollbar-thumb, .sidebar::-webkit-scrollbar-thumb {
	background: color-mix(in srgb, var(--text) 12%, transparent);
	border-radius: 8px;
}
.post-list {
	scrollbar-width: thin;
	scrollbar-color: color-mix(in srgb, var(--text) 12%, transparent) transparent;
}

/* Bottom floating action bar */
.floating-bottombar { position: sticky; bottom: 20px; z-index: 5; display: flex; justify-content: center; margin-top: 32px; }
.floating-bottombar .toolbar { display: flex; align-items: center; gap: 8px; padding: 6px 14px; border-radius: 12px; background: color-mix(in srgb, var(--bg) 70%, var(--card) 30%); box-shadow: 0 8px 30px rgba(0,0,0,0.10), inset 0 0 0 1px var(--border); backdrop-filter: blur(6px); width: 100%; max-width: 760px; }
.floating-bottombar .toolbar .toolbar-sep { width: 1px; height: 20px; background: var(--border); display: inline-block; margin: 0 2px; }
.floating-bottombar .toolbar .ti { width: 16px; height: 16px; display: block; color: var(--text); }
.floating-bottombar .toolbar .ti.ti-save { width: 14px; height: 14px; }
.floating-bottombar .toolbar .ti.ti-unlisted { width: 12px; height: 12px; transform: translateY(2px); display: inline-block; }
.floating-bottombar .toolbar button { display: inline-flex; align-items: center; justify-content: center; padding: 6px 12px; border-radius: 8px; background: transparent; color: var(--text); box-shadow: none; min-height: 28px; }
.floating-bottombar .toolbar button:hover { background: color-mix(in srgb, var(--card), var(--text) 6%); box-shadow: none; transform: translateY(0); }
.floating-bottombar .toolbar button.is-active { background: color-mix(in srgb, var(--card), var(--text) 10%); box-shadow: inset 0 0 0 1px var(--border); color: var(--text); }
.floating-bottombar .privacy-toggle .ti { width: 14px; height: 14px; }
.floating-bottombar .privacy-toggle button span { font-size: 12px; }
.floating-bottombar .slug-wrap .prefix { color: var(--muted); font-size: 14px; }
.floating-bottombar .slug-inline { flex: 1 1 0; min-width: 120px; padding: 6px 10px; border-radius: 8px; background: transparent; color: var(--text); border: none; box-shadow: none; outline: none; min-height: 28px; }
.floating-bottombar .slug-inline::placeholder { color: color-mix(in srgb, var(--muted), transparent 10%); }

/* Animations */
.fade-in { animation: fadeIn .4s ease both; }
.slide-up { animation: slideUp .4s ease both; }
.slide-in { animation: slideIn .3s ease both; }

.breathing { animation: breathe 1.2s ease-in-out infinite; }

/* Centered loading states */
.post-content[aria-busy="true"] { display: grid; place-items: center; min-height: 240px; }
.post-content[aria-busy="true"] .spinner { width: 32px; height: 32px; border-width: 3px; }
.post[aria-busy="true"] { display: grid; place-items: center; min-height: 40dvh; }
.post[aria-busy="true"] .spinner { width: 32px; height: 32px; border-width: 3px; }
@keyframes fadeIn { from { opacity: 0 } to { opacity: 1 } }
@keyframes slideUp { from { opacity: 0; transform: translateY(8px) } to { opacity: 1; transform: translateY(0) } }
@keyframes slideIn { from { opacity: 0; transform: translateX(-8px) } to { opacity: 1; transform: translateX(0) } }
@keyframes breathe { 0% { opacity: 1 } 50% { opacity: .5 } 100% { opacity: 1 } }

/* Spinner */
.spinner { display: inline-block; border: 2px solid color-mix(in srgb, var(--text) 18%, transparent); border-top-color: var(--text); border-radius: 50%; animation: spin 0.8s linear infinite; vertical-align: middle; }
@keyframes spin { to { transform: rotate(360deg); } }
@keyframes fadeOut { from { opacity: 1 } to { opacity: 0 } }
@keyframes slideDown { from { opacity: 1; transform: translateY(0) } to { opacity: 0; transform: translateY(8px) } }

/* Modal */
.modal-backdrop { position: fixed; inset: 0; backdrop-filter: blur(8px); background: color-mix(in srgb, var(--bg), transparent 6%); display: grid; place-items: center; z-index: 1000; animation: fadeIn .16s ease both; }
.modal-backdrop[data-leaving] { animation: fadeOut .12s ease both; }
.modal-card { width: min(92vw, 460px); background: var(--bg); color: var(--text); border-radius: 14px; box-shadow: 0 24px 80px rgba(0,0,0,0.22), inset 0 0 0 1px var(--border); padding: 32px; animation: slideUp .2s ease both; }
.modal-card[data-danger] { box-shadow: 0 24px 80px rgba(190,18,60,0.28), inset 0 0 0 1px var(--border); }
.modal-card[data-leaving] { animation: slideDown .14s ease both; }
.modal-title { margin: 0 0 12px 0; font-size: 18px; font-weight: 700; }
.modal-body { color: var(--text); margin-bottom: 28px; line-height: 1.5; }
.modal-actions { display: flex; gap: 16px; justify-content: flex-end; }
.btn-danger { color: #fff; background: #e11d48; box-shadow: none; }
.btn-danger:hover { background: #be123c; box-shadow: none; }

/* Random button hover */
.random-btn { transition: background .2s ease, box-shadow .2s ease, transform .15s ease; }
.random-btn:hover { background: color-mix(in srgb, var(--card), var(--text) 6%); box-shadow: 0 6px 18px rgba(0,0,0,0.10), inset 0 0 0 1px var(--border); }

/* Drawer and responsive layout */
@media (max-width: 860px) {
  .menu-btn { display: inline-flex; }
  .layout { grid-template-columns: 1fr; gap: 0; }
  .layout::before { display: none; }
  .layout > .content { padding: 16px 16px; }
  .sidebar { position: fixed; top: 56px; left: 0; bottom: 0; width: min(80vw, 360px); max-width: 92vw; background: color-mix(in srgb, var(--bg) 94%, var(--card) 6%); border-right: 1px solid var(--border); transform: translateX(-100%); transition: transform .25s ease; z-index: 200; }
  .sidebar.drawer.is-open { transform: translateX(0); }
  .sidebar .post-list { max-height: calc(100vh - 56px); padding-right: 10px; padding-left: 10px; }
  .drawer-overlay { position: fixed; inset: 56px 0 0 0; background: rgba(0,0,0,0.35); backdrop-filter: blur(1px); border: none; padding: 0; margin: 0; cursor: default; opacity: 0; pointer-events: none; transition: opacity .2s ease; z-index: 150; }
  .drawer-overlay.is-visible { opacity: 1; pointer-events: auto; border-radius: 0px }
  .drawer-overlay:hover,
  .drawer-overlay:active {
    background: rgba(0,0,0,0.35);
    box-shadow: none;
  }
}
